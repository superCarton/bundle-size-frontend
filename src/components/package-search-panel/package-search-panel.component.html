<form (submit)="onSubmit()" #form="ngForm" class="search-form mb-3">
  <mat-form-field appearance="fill" class="package-field">
    <mat-label>Package name</mat-label>
    <input
      matInput
      required
      packageNameValidator
      name="package"
      [(ngModel)]="packageToSearch"
      #searchRef="ngModel"
      type="text"
      autocomplete="off"
      class="search-input"/>
    <mat-icon matSuffix (click)="onSubmit()">search</mat-icon>
    <mat-error *ngIf="searchRef.errors && searchRef.errors.required">The package name is mandatory</mat-error>
    <mat-error *ngIf="searchRef.errors && searchRef.errors.invalidPackageName">The package name seams not to be valid</mat-error>
  </mat-form-field>
</form>
<div class="info-panel error" *ngIf="errors$ | async; let errors;">
  <mat-icon class="error-icon">report_problem</mat-icon>
  <div *ngFor="let error of errors">{{error.title}}</div>
</div>
<div class="info-panel warning" *ngIf="warnings$ | async; let warnings;">
  <mat-icon class="error-icon">warning</mat-icon>
  <div *ngFor="let warning of warnings">{{warning}}</div>
</div>
<div *ngIf="!(isPending$ | async); else loading">
  <ng-container *ngIf="bundleSizes$ | async; let bundleSizes;">
    <chart *ngIf="bundleSizes.length > 0" [bundleSizes]="bundleSizes"></chart>
  </ng-container>
</div>

<ng-template #loading>
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; display: block; shape-rendering: auto;" width="25rem" height="25rem" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
    <g transform="translate(50 50)">
      <g transform="translate(-19 -19) scale(0.6)">
        <g transform="rotate(34.1048)">
          <animateTransform attributeName="transform" type="rotate" values="0;36" keyTimes="0;1" dur="0.5586592178770949s" begin="0s" repeatCount="indefinite"></animateTransform>
          <path d="M31.359972760794346 21.46047782418268 L38.431040572659825 28.531545636048154 L28.531545636048154 38.431040572659825 L21.46047782418268 31.359972760794346 A38 38 0 0 1 12.756598534413827 35.79482076825907 L12.756598534413827 35.79482076825907 L14.320943184816137 45.67170417421045 L0.4933064164842036 47.86178668477369 L-1.071038233918106 37.98490327882231 A38 38 0 0 1 -10.719362751275682 36.45675880007113 L-10.719362751275682 36.45675880007113 L-15.25926774867115 45.36682404195481 L-27.733359087308305 39.01095704560115 L-23.193454089912837 30.10089180371747 A38 38 0 0 1 -30.100891803717467 23.19345408991284 L-30.100891803717467 23.19345408991284 L-39.010957045601145 27.73335908730831 L-45.3668240419548 15.259267748671157 L-36.45675880007112 10.719362751275689 A38 38 0 0 1 -37.98490327882231 1.0710382339181128 L-37.98490327882231 1.0710382339181128 L-47.86178668477369 -0.49330641648419493 L-45.67170417421045 -14.320943184816128 L-35.79482076825907 -12.75659853441382 A38 38 0 0 1 -31.35997276079435 -21.460477824182675 L-31.35997276079435 -21.460477824182675 L-38.431040572659825 -28.531545636048147 L-28.53154563604818 -38.4310405726598 L-21.4604778241827 -31.35997276079433 A38 38 0 0 1 -12.756598534413815 -35.79482076825908 L-12.756598534413815 -35.79482076825908 L-14.320943184816125 -45.671704174210454 L-0.493306416484226 -47.86178668477368 L1.0710382339180844 -37.98490327882231 A38 38 0 0 1 10.719362751275693 -36.45675880007112 L10.719362751275693 -36.45675880007112 L15.25926774867116 -45.3668240419548 L27.733359087308287 -39.01095704560117 L23.19345408991282 -30.100891803717484 A38 38 0 0 1 30.10089180371747 -23.193454089912834 L30.10089180371747 -23.193454089912834 L39.010957045601145 -27.733359087308305 L45.36682404195479 -15.259267748671181 L36.456758800071114 -10.71936275127571 A38 38 0 0 1 37.98490327882231 -1.0710382339181006 L37.98490327882231 -1.0710382339181006 L47.86178668477369 0.4933064164842056 L45.67170417421046 14.320943184816105 L35.79482076825908 12.756598534413799 A38 38 0 0 1 31.359972760794346 21.460477824182686 M0 -27A27 27 0 1 0 0 27 A27 27 0 1 0 0 -27" fill="#673ab6"></path>
        </g>
      </g>
      <g transform="translate(19 19) scale(0.6)">
        <g transform="rotate(19.8952)">
          <animateTransform attributeName="transform" type="rotate" values="36;0" keyTimes="0;1" dur="0.5586592178770949s" begin="-0.27932960893854747s" repeatCount="indefinite"></animateTransform>
          <path d="M-31.35997276079435 -21.460477824182675 L-38.431040572659825 -28.531545636048147 L-28.53154563604818 -38.4310405726598 L-21.4604778241827 -31.35997276079433 A38 38 0 0 1 -12.756598534413815 -35.79482076825908 L-12.756598534413815 -35.79482076825908 L-14.320943184816125 -45.671704174210454 L-0.493306416484226 -47.86178668477368 L1.0710382339180844 -37.98490327882231 A38 38 0 0 1 10.719362751275693 -36.45675880007112 L10.719362751275693 -36.45675880007112 L15.25926774867116 -45.3668240419548 L27.733359087308287 -39.01095704560117 L23.19345408991282 -30.100891803717484 A38 38 0 0 1 30.10089180371747 -23.193454089912834 L30.10089180371747 -23.193454089912834 L39.010957045601145 -27.733359087308305 L45.36682404195479 -15.259267748671181 L36.456758800071114 -10.71936275127571 A38 38 0 0 1 37.98490327882231 -1.0710382339181006 L37.98490327882231 -1.0710382339181006 L47.86178668477369 0.4933064164842056 L45.67170417421046 14.320943184816105 L35.79482076825908 12.756598534413799 A38 38 0 0 1 31.359972760794346 21.460477824182686 L31.359972760794346 21.460477824182686 L38.431040572659825 28.531545636048158 L28.53154563604818 38.4310405726598 L21.460477824182703 31.35997276079433 A38 38 0 0 1 12.756598534413818 35.79482076825907 L12.756598534413818 35.79482076825907 L14.32094318481613 45.67170417421045 L0.493306416484232 47.86178668477368 L-1.0710382339180797 37.98490327882231 A38 38 0 0 1 -10.719362751275689 36.45675880007112 L-10.719362751275689 36.45675880007112 L-15.259267748671162 45.3668240419548 L-27.733359087308344 39.01095704560112 L-23.19345408991287 30.100891803717445 A38 38 0 0 1 -30.10089180371747 23.193454089912837 L-30.10089180371747 23.193454089912837 L-39.01095704560115 27.7333590873083 L-45.366824041954814 15.259267748671112 L-36.456758800071135 10.719362751275648 A38 38 0 0 1 -37.98490327882231 1.0710382339181053 L-37.98490327882231 1.0710382339181053 L-47.86178668477368 -0.49330641648420825 L-45.67170417421043 -14.320943184816171 L-35.79482076825906 -12.756598534413857 A38 38 0 0 1 -31.359972760794346 -21.46047782418268 M0 -27A27 27 0 1 0 0 27 A27 27 0 1 0 0 -27" fill="#bbcedd"></path>
        </g>
      </g>
    </g>
  </svg>
</ng-template>
